# Three.js 开放世界游戏原型

这是一个使用Three.js构建的开放世界游戏原型，包含基本的地形生成、玩家控制、基础物体和光照系统。

## 功能特性

- 基于噪声函数的程序化地形生成
- 第一人称相机控制系统
- 基本的物理和碰撞系统
- 树木和岩石等环境元素
- 日光和环境光照系统

## 运行项目

1. 克隆项目
```
git clone <项目地址>
cd threejs-open-world
```

2. 安装依赖
```
npm install
```

3. 启动开发服务器
```
npm run dev
```

4. 在浏览器中打开 http://localhost:5173

## 控制说明

- WASD或方向键 - 移动
- 鼠标 - 视角控制
- 空格键 - 跳跃
- 点击游戏窗口 - 锁定鼠标指针（按ESC解除锁定）

## 相机控制系统说明

本项目实现了一个层次化的第一人称相机控制系统，由三个主要部分组成：

### 对象层次结构

1. **yawObject（偏航对象）**：
   - 最顶层对象，控制左右旋转（绕Y轴）
   - 相当于玩家的整个身体
   - 位置等同于玩家在世界中的位置

2. **pitchObject（俯仰对象）**：
   - yawObject的子对象，控制上下旋转（绕X轴）
   - 相当于玩家的头部
   - Y轴位置设为2，模拟头部高度

3. **camera（相机）**：
   - pitchObject的子对象
   - 相当于玩家的眼睛
   - 位置设为原点(0,0,0)，位于pitchObject中心

### 运作原理

- **左右看（水平旋转）**：
  旋转yawObject的Y轴，整个系统（包括相机）跟随旋转
  
- **上下看（垂直旋转）**：
  旋转pitchObject的X轴，垂直视角受限于-90°到90°，防止过度旋转
  
- **移动**：
  通过WASD控制，移动方向与相机朝向同步，实现自然的第一人称控制

这种设计模拟了人类头部和眼睛的自然运动，提供了沉浸式的游戏体验。

## 技术栈

- Three.js
- JavaScript
- Vite

## 未来计划

- 添加更多环境变化（如白天/黑夜循环）
- 改进地形生成算法
- 添加水体和其他景观特性
- 添加更多互动元素
- 优化性能和加载时间 